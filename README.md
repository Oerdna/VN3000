# VN3000
Basic App for the older installation make by Rus - Ukr factory

### Настройки и подключение.

Для получения кадров с can шины требуется подключать устройство на скорости 1000 кБит/с (или 1000000). Перехват кадров осуществляется при помощи скрипта can.viewer.py.

Базовая команда для запуска скрипта:

```powershell
$ python -m can.viewer -b 1000000 -c 0 -i systec
```

| Команды                    | ID         | DLC  | DATA                    |
| -------------------------- | ---------- | ---- | ----------------------- |
| Открыть напуск             | 0x181E0E50 | 8    | 01 00 10 00 00 00 00 00 |
| Закрыть напуск             | 0x181E0E50 | 8    | 01 00 1F 00 00 00 00 00 |
| Включить насос мех. насос  | 0x101E0070 | 8    | 11 00 01 00 DC F6 12 00 |
| Выключить насос мех. насос | 0x101E0070 | 8    | 11 00 02 00 DC F6 12 00 |
| Включить турб. насос       | 0x101E0070 | 8    | 11 00 03 00 DC F6 12 00 |
| Выключить турб. насос      | 0x101E0070 | 8    | 11 00 04 00 DC F6 12 00 |
| Открыть клапан VE3         | 0x181E0E50 | 8    | 11 00 30 00 00 00 00 00 |
| Закрыть клапан VE3         | 0x181E0E50 | 8    | 11 00 3F 00 00 00 00 00 |
| Открыть клапан VE2         | 0x181E0E50 | 8    | 11 00 20 00 00 00 00 00 |
| Закрыть клапан VE2         | 0x181E0E50 | 8    | 11 00 2F 00 00 00 00 00 |
|                            |            |      |                         |

| Время | Кадры состояния | ID         | DLC  | DATA                    |
| ----- | --------------- | ---------- | ---- | ----------------------- |
| 0.343 |                 | 0x101E0110 | 8    | 0F 00 00 00 00 00 36 7E |
| 0.468 |                 | 0x101E0090 | 8    | 0F 00 00 00 34 87 36 7E |
| 0.593 |                 | 0x101E0030 | 8    | 0F 00 00 00 34 87 36 7E |
| 0.718 |                 | 0x101E0010 | 8    | 0F 00 00 00 34 87 36 7E |
|       |                 |            |      |                         |

Работает после выключения (постоянный сигнал с компьютера)

| ID         | DLC  | DATA                    |
| ---------- | ---- | ----------------------- |
| 0x101E0070 | 8    | FF 00 00 00 00 00 00 00 |
| 0x181E0E50 | 8    | FF 00 00 00 00 00 00 00 |

 

Нужно изменять состояние сигнала для кадров 0x101E0070 и 0x181E0E50 для записи последнего состояния в шкаф (но это не точно)

Требуется понять, где значения состояния заслонки и датчиков давления!

Состояния, которые приходят с шкафа:

| Состояние                                   | ID         | DLC  | DATA                         |
| ------------------------------------------- | ---------- | ---- | ---------------------------- |
| Камера открыта                              | 0x101E0065 | 8    | 01 00 0F 00 00 00 00 00      |
| Клапан VE4 остановлен                       | 0x101E0065 | 8    | 01 00 10 00 00 00 00         |
| Ошибка! Исчерпан лимит времени. Клапан VE4. | 0x101E0065 | 8    | 01 00 11 00 00 00 00         |
| Давление                                    | 0x181E0E60 | 8    | 01 для P1, 02 для P2, дальше |
| Включен форвакуумный насос                  | 0x101E0065 | 8    | 01 00 01 00 00 00 00 00      |
|                                             |            |      |                              |
